name: Build and Deploy Documentation Site

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: pages
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Generate VitePress Configuration
        run: |
          # Create directories
          mkdir -p .vitepress
          mkdir -p public

          # Generate package.json
          cat > package.json << 'PKGJSON'
          {
            "name": "system-design-patterns-docs",
            "private": true,
            "type": "module",
            "scripts": {
              "docs:dev": "vitepress dev",
              "docs:build": "vitepress build",
              "docs:preview": "vitepress preview"
            },
            "devDependencies": {
              "vitepress": "^1.5.0"
            }
          }
          PKGJSON

          # Generate VitePress config with i18n
          cat > .vitepress/config.mts << 'VITECONFIG'
          import { defineConfig } from 'vitepress'

          // Shared sidebar configuration
          const sidebarEN = [
            {
              text: '1. Foundations',
              collapsed: false,
              items: [
                { text: 'ACID Transactions', link: '/01-foundations/01-acid-transactions' },
                { text: 'Isolation Levels', link: '/01-foundations/02-isolation-levels' },
                { text: 'CAP Theorem', link: '/01-foundations/03-cap-theorem' },
                { text: 'Consistency Models', link: '/01-foundations/04-consistency-models' },
                { text: 'Distributed Time', link: '/01-foundations/05-distributed-time' },
                { text: 'Failure Modes', link: '/01-foundations/06-failure-modes' },
                { text: 'Network Partitions', link: '/01-foundations/07-network-partitions' },
                { text: 'Idempotency', link: '/01-foundations/08-idempotency' },
              ]
            },
            {
              text: '2. Distributed Databases',
              collapsed: true,
              items: [
                { text: 'Single-Leader Replication', link: '/02-distributed-databases/01-single-leader-replication' },
                { text: 'Multi-Leader Replication', link: '/02-distributed-databases/02-multi-leader-replication' },
                { text: 'Leaderless Replication', link: '/02-distributed-databases/03-leaderless-replication' },
                { text: 'Conflict Resolution', link: '/02-distributed-databases/04-conflict-resolution' },
                { text: 'Partitioning Strategies', link: '/02-distributed-databases/05-partitioning-strategies' },
                { text: 'Secondary Indexes', link: '/02-distributed-databases/06-secondary-indexes' },
                { text: 'Distributed Transactions', link: '/02-distributed-databases/07-distributed-transactions' },
                { text: 'Consensus Algorithms', link: '/02-distributed-databases/08-consensus-algorithms' },
                { text: 'Leader Election', link: '/02-distributed-databases/09-leader-election' },
              ]
            },
            {
              text: '3. Storage Engines',
              collapsed: true,
              items: [
                { text: 'B-Trees', link: '/03-storage-engines/01-b-trees' },
                { text: 'LSM Trees', link: '/03-storage-engines/02-lsm-trees' },
                { text: 'SSTables & Compaction', link: '/03-storage-engines/03-sstables-compaction' },
                { text: 'Write-Ahead Logging', link: '/03-storage-engines/04-write-ahead-logging' },
                { text: 'Bloom Filters', link: '/03-storage-engines/05-bloom-filters' },
                { text: 'Column Storage', link: '/03-storage-engines/06-column-storage' },
                { text: 'Data Encoding', link: '/03-storage-engines/07-data-encoding' },
              ]
            },
            {
              text: '4. Caching',
              collapsed: true,
              items: [
                { text: 'Cache Strategies', link: '/04-caching/01-cache-strategies' },
                { text: 'Cache Invalidation', link: '/04-caching/02-cache-invalidation' },
                { text: 'Distributed Caching', link: '/04-caching/03-distributed-caching' },
                { text: 'Cache Stampede', link: '/04-caching/04-cache-stampede' },
                { text: 'Multi-Tier Caching', link: '/04-caching/05-multi-tier-caching' },
                { text: 'Cache Warming', link: '/04-caching/06-cache-warming' },
              ]
            },
            {
              text: '5. Messaging',
              collapsed: true,
              items: [
                { text: 'Message Queues', link: '/05-messaging/01-message-queues' },
                { text: 'Pub/Sub Systems', link: '/05-messaging/02-pub-sub' },
                { text: 'Message Ordering', link: '/05-messaging/03-message-ordering' },
                { text: 'Delivery Guarantees', link: '/05-messaging/04-delivery-guarantees' },
                { text: 'Event Sourcing', link: '/05-messaging/05-event-sourcing' },
                { text: 'CQRS', link: '/05-messaging/06-cqrs' },
                { text: 'Outbox Pattern', link: '/05-messaging/07-outbox-pattern' },
                { text: 'Dead Letter Queues', link: '/05-messaging/08-dead-letter-queues' },
              ]
            },
            {
              text: '6. Scaling',
              collapsed: true,
              items: [
                { text: 'Load Balancing', link: '/06-scaling/01-load-balancing' },
                { text: 'Horizontal vs Vertical', link: '/06-scaling/02-horizontal-vertical' },
                { text: 'Database Sharding', link: '/06-scaling/03-database-sharding' },
                { text: 'CDN Architecture', link: '/06-scaling/04-cdn-architecture' },
                { text: 'Rate Limiting', link: '/06-scaling/05-rate-limiting' },
                { text: 'Circuit Breakers', link: '/06-scaling/06-circuit-breakers' },
                { text: 'Backpressure', link: '/06-scaling/07-backpressure' },
                { text: 'Auto-Scaling', link: '/06-scaling/08-auto-scaling' },
              ]
            },
            {
              text: '7. Real-Time',
              collapsed: true,
              items: [
                { text: 'Polling', link: '/07-real-time/01-polling' },
                { text: 'Long Polling', link: '/07-real-time/02-long-polling' },
                { text: 'Server-Sent Events', link: '/07-real-time/03-server-sent-events' },
                { text: 'WebSockets', link: '/07-real-time/04-websockets' },
                { text: 'WebRTC', link: '/07-real-time/05-webrtc' },
                { text: 'Presence', link: '/07-real-time/06-presence' },
              ]
            },
            {
              text: '8. Case Studies',
              collapsed: true,
              items: [
                { text: 'Twitter', link: '/08-case-studies/01-twitter' },
                { text: 'Instagram', link: '/08-case-studies/02-instagram' },
                { text: 'Uber', link: '/08-case-studies/03-uber' },
                { text: 'Netflix', link: '/08-case-studies/04-netflix' },
                { text: 'Slack', link: '/08-case-studies/05-slack' },
                { text: 'Stripe', link: '/08-case-studies/06-stripe' },
                { text: 'Dropbox', link: '/08-case-studies/07-dropbox' },
                { text: 'Discord', link: '/08-case-studies/08-discord' },
                { text: 'Google Maps', link: '/08-case-studies/09-google-maps' },
                { text: 'WhatsApp', link: '/08-case-studies/10-whatsapp' },
              ]
            },
            {
              text: '9. Whitepapers',
              collapsed: true,
              items: [
                { text: 'MapReduce', link: '/09-whitepapers/01-mapreduce' },
                { text: 'Dynamo', link: '/09-whitepapers/02-dynamo' },
                { text: 'Bigtable', link: '/09-whitepapers/03-bigtable' },
                { text: 'Spanner', link: '/09-whitepapers/04-spanner' },
                { text: 'TAO', link: '/09-whitepapers/05-tao' },
                { text: 'Kafka', link: '/09-whitepapers/06-kafka' },
                { text: 'Raft', link: '/09-whitepapers/07-raft' },
                { text: 'Chubby', link: '/09-whitepapers/08-chubby' },
                { text: 'Aurora', link: '/09-whitepapers/09-aurora' },
                { text: 'CockroachDB', link: '/09-whitepapers/10-cockroachdb' },
              ]
            },
            {
              text: '10. Security',
              collapsed: true,
              items: [
                { text: 'Authentication Fundamentals', link: '/10-security/01-authentication-fundamentals' },
                { text: 'OAuth2 & OpenID Connect', link: '/10-security/02-oauth2-openid-connect' },
                { text: 'JWT Tokens', link: '/10-security/03-jwt-tokens' },
                { text: 'API Security', link: '/10-security/04-api-security' },
                { text: 'Zero Trust Architecture', link: '/10-security/05-zero-trust-architecture' },
                { text: 'Encryption', link: '/10-security/06-encryption' },
              ]
            },
            {
              text: '11. Observability',
              collapsed: true,
              items: [
                { text: 'Distributed Tracing', link: '/11-observability/01-distributed-tracing' },
                { text: 'Metrics & Monitoring', link: '/11-observability/02-metrics-monitoring' },
                { text: 'Logging', link: '/11-observability/03-logging' },
                { text: 'Alerting', link: '/11-observability/04-alerting' },
              ]
            },
            {
              text: '12. Service Mesh',
              collapsed: true,
              items: [
                { text: 'Service Discovery', link: '/12-service-mesh/01-service-discovery' },
                { text: 'API Gateway', link: '/12-service-mesh/02-api-gateway' },
                { text: 'Sidecar Pattern', link: '/12-service-mesh/03-sidecar-pattern' },
              ]
            },
            {
              text: '13. Data Pipelines',
              collapsed: true,
              items: [
                { text: 'Batch Processing', link: '/13-data-pipelines/01-batch-processing' },
                { text: 'Stream Processing', link: '/13-data-pipelines/02-stream-processing' },
                { text: 'Lambda & Kappa Architecture', link: '/13-data-pipelines/03-lambda-kappa-architecture' },
              ]
            },
            {
              text: '14. Search Systems',
              collapsed: true,
              items: [
                { text: 'Inverted Indexes', link: '/14-search-systems/01-inverted-indexes' },
                { text: 'Full-Text Search', link: '/14-search-systems/02-full-text-search' },
              ]
            },
            {
              text: '15. Deployment',
              collapsed: true,
              items: [
                { text: 'Deployment Strategies', link: '/15-deployment/01-deployment-strategies' },
                { text: 'Feature Flags', link: '/15-deployment/02-feature-flags' },
              ]
            },
            {
              text: '16. LLM Systems',
              collapsed: true,
              items: [
                { text: 'Agent Fundamentals', link: '/16-llm-systems/01-agent-fundamentals' },
                { text: 'Orchestration Patterns', link: '/16-llm-systems/02-orchestration-patterns' },
                { text: 'Multi-Agent Systems', link: '/16-llm-systems/03-multi-agent-systems' },
                { text: 'RAG Patterns', link: '/16-llm-systems/04-rag-patterns' },
                { text: 'LLM Infrastructure', link: '/16-llm-systems/05-llm-infrastructure' },
              ]
            },
          ]

          // Japanese sidebar
          const sidebarJA = [
            {
              text: '1. åŸºç¤',
              collapsed: false,
              items: [
                { text: 'ACIDãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³', link: '/ja/01-foundations/01-acid-transactions' },
                { text: 'åˆ†é›¢ãƒ¬ãƒ™ãƒ«', link: '/ja/01-foundations/02-isolation-levels' },
                { text: 'CAPå®šç†', link: '/ja/01-foundations/03-cap-theorem' },
                { text: 'æ•´åˆæ€§ãƒ¢ãƒ‡ãƒ«', link: '/ja/01-foundations/04-consistency-models' },
                { text: 'åˆ†æ•£æ™‚åˆ»', link: '/ja/01-foundations/05-distributed-time' },
                { text: 'éšœå®³ãƒ¢ãƒ¼ãƒ‰', link: '/ja/01-foundations/06-failure-modes' },
                { text: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ†æ–­', link: '/ja/01-foundations/07-network-partitions' },
                { text: 'å†ªç­‰æ€§', link: '/ja/01-foundations/08-idempotency' },
              ]
            },
            {
              text: '2. åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹',
              collapsed: true,
              items: [
                { text: 'ã‚·ãƒ³ã‚°ãƒ«ãƒªãƒ¼ãƒ€ãƒ¼ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³', link: '/ja/02-distributed-databases/01-single-leader-replication' },
                { text: 'ãƒãƒ«ãƒãƒªãƒ¼ãƒ€ãƒ¼ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³', link: '/ja/02-distributed-databases/02-multi-leader-replication' },
                { text: 'ãƒªãƒ¼ãƒ€ãƒ¼ãƒ¬ã‚¹ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³', link: '/ja/02-distributed-databases/03-leaderless-replication' },
                { text: 'ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ±º', link: '/ja/02-distributed-databases/04-conflict-resolution' },
                { text: 'ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°æˆ¦ç•¥', link: '/ja/02-distributed-databases/05-partitioning-strategies' },
                { text: 'ã‚»ã‚«ãƒ³ãƒ€ãƒªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹', link: '/ja/02-distributed-databases/06-secondary-indexes' },
                { text: 'åˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³', link: '/ja/02-distributed-databases/07-distributed-transactions' },
                { text: 'ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ', link: '/ja/02-distributed-databases/08-consensus-algorithms' },
                { text: 'ãƒªãƒ¼ãƒ€ãƒ¼é¸å‡º', link: '/ja/02-distributed-databases/09-leader-election' },
              ]
            },
            {
              text: '3. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³',
              collapsed: true,
              items: [
                { text: 'Bæœ¨', link: '/ja/03-storage-engines/01-b-trees' },
                { text: 'LSMæœ¨', link: '/ja/03-storage-engines/02-lsm-trees' },
                { text: 'SSTableã¨ã‚³ãƒ³ãƒ‘ã‚¯ã‚·ãƒ§ãƒ³', link: '/ja/03-storage-engines/03-sstables-compaction' },
                { text: 'å…ˆè¡Œæ›¸ãè¾¼ã¿ãƒ­ã‚°', link: '/ja/03-storage-engines/04-write-ahead-logging' },
                { text: 'ãƒ–ãƒ«ãƒ¼ãƒ ãƒ•ã‚£ãƒ«ã‚¿', link: '/ja/03-storage-engines/05-bloom-filters' },
                { text: 'ã‚«ãƒ©ãƒ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸', link: '/ja/03-storage-engines/06-column-storage' },
                { text: 'ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°', link: '/ja/03-storage-engines/07-data-encoding' },
              ]
            },
            {
              text: '4. ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°',
              collapsed: true,
              items: [
                { text: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥', link: '/ja/04-caching/01-cache-strategies' },
                { text: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–', link: '/ja/04-caching/02-cache-invalidation' },
                { text: 'åˆ†æ•£ã‚­ãƒ£ãƒƒã‚·ãƒ¥', link: '/ja/04-caching/03-distributed-caching' },
                { text: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¹ã‚¿ãƒ³ãƒ”ãƒ¼ãƒ‰', link: '/ja/04-caching/04-cache-stampede' },
                { text: 'å¤šå±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥', link: '/ja/04-caching/05-multi-tier-caching' },
                { text: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¦ã‚©ãƒ¼ãƒŸãƒ³ã‚°', link: '/ja/04-caching/06-cache-warming' },
              ]
            },
            {
              text: '5. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°',
              collapsed: true,
              items: [
                { text: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼', link: '/ja/05-messaging/01-message-queues' },
                { text: 'Pub/Sub', link: '/ja/05-messaging/02-pub-sub' },
                { text: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é †åº', link: '/ja/05-messaging/03-message-ordering' },
                { text: 'é…ä¿¡ä¿è¨¼', link: '/ja/05-messaging/04-delivery-guarantees' },
                { text: 'ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°', link: '/ja/05-messaging/05-event-sourcing' },
                { text: 'CQRS', link: '/ja/05-messaging/06-cqrs' },
                { text: 'Outboxãƒ‘ã‚¿ãƒ¼ãƒ³', link: '/ja/05-messaging/07-outbox-pattern' },
                { text: 'ãƒ‡ãƒƒãƒ‰ãƒ¬ã‚¿ãƒ¼ã‚­ãƒ¥ãƒ¼', link: '/ja/05-messaging/08-dead-letter-queues' },
              ]
            },
            {
              text: '6. ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°',
              collapsed: true,
              items: [
                { text: 'ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°', link: '/ja/06-scaling/01-load-balancing' },
                { text: 'æ°´å¹³ vs å‚ç›´ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°', link: '/ja/06-scaling/02-horizontal-vertical' },
                { text: 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°', link: '/ja/06-scaling/03-database-sharding' },
                { text: 'CDNã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£', link: '/ja/06-scaling/04-cdn-architecture' },
                { text: 'ãƒ¬ãƒ¼ãƒˆåˆ¶é™', link: '/ja/06-scaling/05-rate-limiting' },
                { text: 'ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼', link: '/ja/06-scaling/06-circuit-breakers' },
                { text: 'ãƒãƒƒã‚¯ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼', link: '/ja/06-scaling/07-backpressure' },
                { text: 'ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°', link: '/ja/06-scaling/08-auto-scaling' },
              ]
            },
            {
              text: '7. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ',
              collapsed: true,
              items: [
                { text: 'ãƒãƒ¼ãƒªãƒ³ã‚°', link: '/ja/07-real-time/01-polling' },
                { text: 'ãƒ­ãƒ³ã‚°ãƒãƒ¼ãƒªãƒ³ã‚°', link: '/ja/07-real-time/02-long-polling' },
                { text: 'Server-Sent Events', link: '/ja/07-real-time/03-server-sent-events' },
                { text: 'WebSocket', link: '/ja/07-real-time/04-websockets' },
                { text: 'WebRTC', link: '/ja/07-real-time/05-webrtc' },
                { text: 'ãƒ—ãƒ¬ã‚¼ãƒ³ã‚¹', link: '/ja/07-real-time/06-presence' },
              ]
            },
            {
              text: '8. ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£',
              collapsed: true,
              items: [
                { text: 'Twitter', link: '/ja/08-case-studies/01-twitter' },
                { text: 'Instagram', link: '/ja/08-case-studies/02-instagram' },
                { text: 'Uber', link: '/ja/08-case-studies/03-uber' },
                { text: 'Netflix', link: '/ja/08-case-studies/04-netflix' },
                { text: 'Slack', link: '/ja/08-case-studies/05-slack' },
                { text: 'Stripe', link: '/ja/08-case-studies/06-stripe' },
                { text: 'Dropbox', link: '/ja/08-case-studies/07-dropbox' },
                { text: 'Discord', link: '/ja/08-case-studies/08-discord' },
                { text: 'Google Maps', link: '/ja/08-case-studies/09-google-maps' },
                { text: 'WhatsApp', link: '/ja/08-case-studies/10-whatsapp' },
              ]
            },
            {
              text: '9. è«–æ–‡',
              collapsed: true,
              items: [
                { text: 'MapReduce', link: '/ja/09-whitepapers/01-mapreduce' },
                { text: 'Dynamo', link: '/ja/09-whitepapers/02-dynamo' },
                { text: 'Bigtable', link: '/ja/09-whitepapers/03-bigtable' },
                { text: 'Spanner', link: '/ja/09-whitepapers/04-spanner' },
                { text: 'TAO', link: '/ja/09-whitepapers/05-tao' },
                { text: 'Kafka', link: '/ja/09-whitepapers/06-kafka' },
                { text: 'Raft', link: '/ja/09-whitepapers/07-raft' },
                { text: 'Chubby', link: '/ja/09-whitepapers/08-chubby' },
                { text: 'Aurora', link: '/ja/09-whitepapers/09-aurora' },
                { text: 'CockroachDB', link: '/ja/09-whitepapers/10-cockroachdb' },
              ]
            },
            {
              text: '10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£',
              collapsed: true,
              items: [
                { text: 'èªè¨¼ã®åŸºç¤', link: '/ja/10-security/01-authentication-fundamentals' },
                { text: 'OAuth2 & OpenID Connect', link: '/ja/10-security/02-oauth2-openid-connect' },
                { text: 'JWTãƒˆãƒ¼ã‚¯ãƒ³', link: '/ja/10-security/03-jwt-tokens' },
                { text: 'APIã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', link: '/ja/10-security/04-api-security' },
                { text: 'ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£', link: '/ja/10-security/05-zero-trust-architecture' },
                { text: 'æš—å·åŒ–', link: '/ja/10-security/06-encryption' },
              ]
            },
            {
              text: '11. ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£',
              collapsed: true,
              items: [
                { text: 'åˆ†æ•£ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°', link: '/ja/11-observability/01-distributed-tracing' },
                { text: 'ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ç›£è¦–', link: '/ja/11-observability/02-metrics-monitoring' },
                { text: 'ãƒ­ã‚°', link: '/ja/11-observability/03-logging' },
                { text: 'ã‚¢ãƒ©ãƒ¼ãƒˆ', link: '/ja/11-observability/04-alerting' },
              ]
            },
            {
              text: '12. ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥',
              collapsed: true,
              items: [
                { text: 'ã‚µãƒ¼ãƒ“ã‚¹ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒª', link: '/ja/12-service-mesh/01-service-discovery' },
                { text: 'APIã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤', link: '/ja/12-service-mesh/02-api-gateway' },
                { text: 'ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³', link: '/ja/12-service-mesh/03-sidecar-pattern' },
              ]
            },
            {
              text: '13. ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³',
              collapsed: true,
              items: [
                { text: 'ãƒãƒƒãƒå‡¦ç†', link: '/ja/13-data-pipelines/01-batch-processing' },
                { text: 'ã‚¹ãƒˆãƒªãƒ¼ãƒ å‡¦ç†', link: '/ja/13-data-pipelines/02-stream-processing' },
                { text: 'Lambda & Kappaã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£', link: '/ja/13-data-pipelines/03-lambda-kappa-architecture' },
              ]
            },
            {
              text: '14. æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ',
              collapsed: true,
              items: [
                { text: 'è»¢ç½®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹', link: '/ja/14-search-systems/01-inverted-indexes' },
                { text: 'å…¨æ–‡æ¤œç´¢', link: '/ja/14-search-systems/02-full-text-search' },
              ]
            },
            {
              text: '15. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ',
              collapsed: true,
              items: [
                { text: 'ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥', link: '/ja/15-deployment/01-deployment-strategies' },
                { text: 'ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ•ãƒ©ã‚°', link: '/ja/15-deployment/02-feature-flags' },
              ]
            },
            {
              text: '16. LLMã‚·ã‚¹ãƒ†ãƒ ',
              collapsed: true,
              items: [
                { text: 'ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®åŸºç¤', link: '/ja/16-llm-systems/01-agent-fundamentals' },
                { text: 'ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³', link: '/ja/16-llm-systems/02-orchestration-patterns' },
                { text: 'ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ', link: '/ja/16-llm-systems/03-multi-agent-systems' },
                { text: 'RAGãƒ‘ã‚¿ãƒ¼ãƒ³', link: '/ja/16-llm-systems/04-rag-patterns' },
                { text: 'LLMã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£', link: '/ja/16-llm-systems/05-llm-infrastructure' },
              ]
            },
          ]

          export default defineConfig({
            title: 'Babushkai System Design Patterns',
            description: 'A comprehensive guide to distributed systems and system design patterns',
            
            // Base URL for GitHub Pages (repo name)
            base: '/system-design-patterns/',
            
            // Ignore dead links in README.md (original repo content)
            ignoreDeadLinks: true,
            
            head: [
              ['link', { rel: 'icon', type: 'image/svg+xml', href: '/logo.svg' }],
              ['meta', { name: 'theme-color', content: '#E91E63' }],
              ['meta', { property: 'og:type', content: 'website' }],
              ['meta', { property: 'og:title', content: 'Babushkai System Design Patterns' }],
              ['meta', { property: 'og:description', content: 'A comprehensive guide to distributed systems' }],
            ],

            locales: {
              root: {
                label: 'English',
                lang: 'en',
                themeConfig: {
                  nav: [
                    { text: 'Home', link: '/' },
                    { text: 'Guide', link: '/01-foundations/01-acid-transactions' },
                    { 
                      text: 'Sections',
                      items: [
                        { text: 'Foundations', link: '/01-foundations/01-acid-transactions' },
                        { text: 'Distributed Databases', link: '/02-distributed-databases/01-single-leader-replication' },
                        { text: 'Storage Engines', link: '/03-storage-engines/01-b-trees' },
                        { text: 'Caching', link: '/04-caching/01-cache-strategies' },
                        { text: 'Messaging', link: '/05-messaging/01-message-queues' },
                        { text: 'Scaling', link: '/06-scaling/01-load-balancing' },
                        { text: 'Real-Time', link: '/07-real-time/01-polling' },
                        { text: 'Case Studies', link: '/08-case-studies/01-twitter' },
                        { text: 'Whitepapers', link: '/09-whitepapers/01-mapreduce' },
                        { text: 'Security', link: '/10-security/01-authentication-fundamentals' },
                        { text: 'Observability', link: '/11-observability/01-distributed-tracing' },
                        { text: 'Service Mesh', link: '/12-service-mesh/01-service-discovery' },
                        { text: 'Data Pipelines', link: '/13-data-pipelines/01-batch-processing' },
                        { text: 'Search Systems', link: '/14-search-systems/01-inverted-indexes' },
                        { text: 'Deployment', link: '/15-deployment/01-deployment-strategies' },
                        { text: 'LLM Systems', link: '/16-llm-systems/01-agent-fundamentals' },
                      ]
                    },
                    { text: 'GitHub', link: 'https://github.com/babushkai/system-design-patterns' }
                  ],
                  sidebar: { '/': sidebarEN },
                  editLink: {
                    pattern: 'https://github.com/babushkai/system-design-patterns/edit/main/:path',
                    text: 'Edit this page on GitHub'
                  },
                  footer: {
                    message: 'Released under the MIT License.',
                    copyright: 'Copyright 2024-present Babushkai'
                  },
                }
              },
              ja: {
                label: 'æ—¥æœ¬èª',
                lang: 'ja',
                link: '/ja/',
                themeConfig: {
                  nav: [
                    { text: 'ãƒ›ãƒ¼ãƒ ', link: '/ja/' },
                    { text: 'ã‚¬ã‚¤ãƒ‰', link: '/ja/01-foundations/01-acid-transactions' },
                    { 
                      text: 'ã‚»ã‚¯ã‚·ãƒ§ãƒ³',
                      items: [
                        { text: 'åŸºç¤', link: '/ja/01-foundations/01-acid-transactions' },
                        { text: 'åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹', link: '/ja/02-distributed-databases/01-single-leader-replication' },
                        { text: 'ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³', link: '/ja/03-storage-engines/01-b-trees' },
                        { text: 'ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°', link: '/ja/04-caching/01-cache-strategies' },
                        { text: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°', link: '/ja/05-messaging/01-message-queues' },
                        { text: 'ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°', link: '/ja/06-scaling/01-load-balancing' },
                        { text: 'ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ', link: '/ja/07-real-time/01-polling' },
                        { text: 'ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£', link: '/ja/08-case-studies/01-twitter' },
                        { text: 'è«–æ–‡', link: '/ja/09-whitepapers/01-mapreduce' },
                        { text: 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£', link: '/ja/10-security/01-authentication-fundamentals' },
                        { text: 'ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£', link: '/ja/11-observability/01-distributed-tracing' },
                        { text: 'ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥', link: '/ja/12-service-mesh/01-service-discovery' },
                        { text: 'ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³', link: '/ja/13-data-pipelines/01-batch-processing' },
                        { text: 'æ¤œç´¢ã‚·ã‚¹ãƒ†ãƒ ', link: '/ja/14-search-systems/01-inverted-indexes' },
                        { text: 'ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ', link: '/ja/15-deployment/01-deployment-strategies' },
                        { text: 'LLMã‚·ã‚¹ãƒ†ãƒ ', link: '/ja/16-llm-systems/01-agent-fundamentals' },
                      ]
                    },
                    { text: 'GitHub', link: 'https://github.com/babushkai/system-design-patterns' }
                  ],
                  sidebar: { '/ja/': sidebarJA },
                  editLink: {
                    pattern: 'https://github.com/babushkai/system-design-patterns/edit/main/:path',
                    text: 'GitHubã§ã“ã®ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†'
                  },
                  footer: {
                    message: 'MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹',
                    copyright: 'Copyright 2024-present Babushkai'
                  },
                  outline: {
                    label: 'ç›®æ¬¡'
                  },
                  docFooter: {
                    prev: 'å‰ã®ãƒšãƒ¼ã‚¸',
                    next: 'æ¬¡ã®ãƒšãƒ¼ã‚¸'
                  },
                  darkModeSwitchLabel: 'ãƒ†ãƒ¼ãƒ',
                  sidebarMenuLabel: 'ãƒ¡ãƒ‹ãƒ¥ãƒ¼',
                  returnToTopLabel: 'ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹',
                }
              }
            },

            themeConfig: {
              logo: '/logo.svg',
              siteTitle: 'Babushkai System Design Patterns',
              
              socialLinks: [
                { icon: 'github', link: 'https://github.com/babushkai/system-design-patterns' }
              ],

              search: {
                provider: 'local'
              },

              outline: {
                level: [2, 3],
                label: 'On this page'
              }
            },

            markdown: {
              lineNumbers: true,
              theme: {
                light: 'github-light',
                dark: 'github-dark'
              }
            },

            lastUpdated: true,
            cleanUrls: true,
          })
          VITECONFIG

          # Generate English homepage
          cat > index.md << 'HOMEPAGE'
          ---
          layout: home

          hero:
            name: "Babushkai"
            text: "System Design Patterns"
            tagline: A comprehensive guide to distributed systems - from fundamentals to production-ready patterns
            image:
              src: /logo.svg
              alt: Babushkai
            actions:
              - theme: brand
                text: Get Started
                link: /01-foundations/01-acid-transactions
              - theme: alt
                text: View on GitHub
                link: https://github.com/babushkai/system-design-patterns

          features:
            - icon: ğŸ—ï¸
              title: Foundations
              details: Master ACID transactions, CAP theorem, consistency models, and distributed time
              link: /01-foundations/01-acid-transactions
            - icon: ğŸ—„ï¸
              title: Distributed Databases
              details: Learn replication, partitioning, consensus algorithms, and distributed transactions
              link: /02-distributed-databases/01-single-leader-replication
            - icon: âš¡
              title: Caching & Performance
              details: Cache strategies, invalidation patterns, and multi-tier caching architectures
              link: /04-caching/01-cache-strategies
            - icon: ğŸ“¨
              title: Messaging Systems
              details: Message queues, event sourcing, CQRS, and exactly-once delivery semantics
              link: /05-messaging/01-message-queues
            - icon: ğŸ“ˆ
              title: Scaling Patterns
              details: Load balancing, sharding, rate limiting, circuit breakers, and backpressure
              link: /06-scaling/01-load-balancing
            - icon: ğŸ¢
              title: Case Studies
              details: Learn from Twitter, Netflix, Uber, Stripe, Discord, and other tech giants
              link: /08-case-studies/01-twitter
            - icon: ğŸ“„
              title: Academic Whitepapers
              details: Deep dives into MapReduce, Dynamo, Spanner, Kafka, Raft, and more
              link: /09-whitepapers/01-mapreduce
            - icon: ğŸ¤–
              title: LLM Systems
              details: Agent architectures, orchestration patterns, RAG, and multi-agent systems
              link: /16-llm-systems/01-agent-fundamentals
          ---

          <div class="babushkai-section">
            <p><strong>Babushkai</strong> - Building knowledge, layer by layer.</p>
          </div>

          ## Quick Navigation

          | Section | Topics |
          |---------|--------|
          | [1. Foundations](/01-foundations/01-acid-transactions) | ACID, CAP, Consistency, Time, Failures |
          | [2. Distributed Databases](/02-distributed-databases/01-single-leader-replication) | Replication, Sharding, Consensus |
          | [3. Storage Engines](/03-storage-engines/01-b-trees) | B-Trees, LSM, WAL, Bloom Filters |
          | [4. Caching](/04-caching/01-cache-strategies) | Strategies, Invalidation, Stampede |
          | [5. Messaging](/05-messaging/01-message-queues) | Queues, Pub/Sub, Event Sourcing |
          | [6. Scaling](/06-scaling/01-load-balancing) | Load Balancing, Rate Limiting |
          | [7. Real-Time](/07-real-time/01-polling) | WebSockets, SSE, WebRTC |
          | [8. Case Studies](/08-case-studies/01-twitter) | Twitter, Netflix, Uber, etc. |
          | [9. Whitepapers](/09-whitepapers/01-mapreduce) | MapReduce, Dynamo, Spanner |
          | [10. Security](/10-security/01-authentication-fundamentals) | Auth, OAuth, Zero Trust |
          | [11. Observability](/11-observability/01-distributed-tracing) | Tracing, Metrics, Logging |
          | [12. Service Mesh](/12-service-mesh/01-service-discovery) | Discovery, Gateway, Sidecar |
          | [13. Data Pipelines](/13-data-pipelines/01-batch-processing) | Batch, Stream, Lambda |
          | [14. Search](/14-search-systems/01-inverted-indexes) | Inverted Index, Full-Text |
          | [15. Deployment](/15-deployment/01-deployment-strategies) | Blue-Green, Canary, Flags |
          | [16. LLM Systems](/16-llm-systems/01-agent-fundamentals) | Agents, RAG, Multi-Agent |

          <style>
          .babushkai-section {
            text-align: center;
            padding: 2rem 0;
            margin: 2rem 0;
            border-top: 1px solid var(--vp-c-divider);
          }
          .babushkai-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 1rem;
          }
          </style>
          HOMEPAGE

          # Generate Japanese homepage
          mkdir -p ja
          cat > ja/index.md << 'HOMEPAGE_JA'
          ---
          layout: home

          hero:
            name: "Babushkai"
            text: "ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³"
            tagline: åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã®ç·åˆã‚¬ã‚¤ãƒ‰ - åŸºç¤ã‹ã‚‰æœ¬ç•ªé‹ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã§
            image:
              src: /logo.svg
              alt: Babushkai
            actions:
              - theme: brand
                text: ã¯ã˜ã‚ã‚‹
                link: /ja/01-foundations/01-acid-transactions
              - theme: alt
                text: GitHubã§è¦‹ã‚‹
                link: https://github.com/babushkai/system-design-patterns

          features:
            - icon: ğŸ—ï¸
              title: åŸºç¤
              details: ACIDãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã€CAPå®šç†ã€æ•´åˆæ€§ãƒ¢ãƒ‡ãƒ«ã€åˆ†æ•£æ™‚åˆ»ã‚’ãƒã‚¹ã‚¿ãƒ¼
              link: /ja/01-foundations/01-acid-transactions
            - icon: ğŸ—„ï¸
              title: åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
              details: ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ã€ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€åˆ†æ•£ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
              link: /ja/02-distributed-databases/01-single-leader-replication
            - icon: âš¡
              title: ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚° & ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
              details: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ã€ç„¡åŠ¹åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã€å¤šå±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
              link: /ja/04-caching/01-cache-strategies
            - icon: ğŸ“¨
              title: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 
              details: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚­ãƒ¥ãƒ¼ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚°ã€CQRSã€exactly-onceé…ä¿¡
              link: /ja/05-messaging/01-message-queues
            - icon: ğŸ“ˆ
              title: ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³
              details: ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã€ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã€ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼
              link: /ja/06-scaling/01-load-balancing
            - icon: ğŸ¢
              title: ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£
              details: Twitterã€Netflixã€Uberã€Stripeã€Discordãªã©ã®å¤§æ‰‹ä¼æ¥­ã‹ã‚‰å­¦ã¶
              link: /ja/08-case-studies/01-twitter
            - icon: ğŸ“„
              title: å­¦è¡“è«–æ–‡
              details: MapReduceã€Dynamoã€Spannerã€Kafkaã€Raftãªã©ã‚’æ·±æ˜ã‚Š
              link: /ja/09-whitepapers/01-mapreduce
            - icon: ğŸ¤–
              title: LLMã‚·ã‚¹ãƒ†ãƒ 
              details: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€RAGã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
              link: /ja/16-llm-systems/01-agent-fundamentals
          ---

          <div class="babushkai-section">

            <p><strong>Babushkai</strong> - çŸ¥è­˜ã‚’ã€å±¤ã‚’é‡ã­ã¦æ§‹ç¯‰ã™ã‚‹ã€‚</p>
          </div>

          ## ã‚¯ã‚¤ãƒƒã‚¯ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

          | ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | ãƒˆãƒ”ãƒƒã‚¯ |
          |---------|--------|
          | [1. åŸºç¤](/ja/01-foundations/01-acid-transactions) | ACIDã€CAPã€æ•´åˆæ€§ã€æ™‚åˆ»ã€éšœå®³ |
          | [2. åˆ†æ•£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹](/ja/02-distributed-databases/01-single-leader-replication) | ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã€ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹ |
          | [3. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¨ãƒ³ã‚¸ãƒ³](/ja/03-storage-engines/01-b-trees) | Bæœ¨ã€LSMã€WALã€ãƒ–ãƒ«ãƒ¼ãƒ ãƒ•ã‚£ãƒ«ã‚¿ |
          | [4. ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°](/ja/04-caching/01-cache-strategies) | æˆ¦ç•¥ã€ç„¡åŠ¹åŒ–ã€ã‚¹ã‚¿ãƒ³ãƒ”ãƒ¼ãƒ‰ |
          | [5. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°](/ja/05-messaging/01-message-queues) | ã‚­ãƒ¥ãƒ¼ã€Pub/Subã€ã‚¤ãƒ™ãƒ³ãƒˆã‚½ãƒ¼ã‚·ãƒ³ã‚° |
          | [6. ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°](/ja/06-scaling/01-load-balancing) | ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ |
          | [7. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ](/ja/07-real-time/01-polling) | WebSocketã€SSEã€WebRTC |
          | [8. ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£](/ja/08-case-studies/01-twitter) | Twitterã€Netflixã€Uberãªã© |
          | [9. è«–æ–‡](/ja/09-whitepapers/01-mapreduce) | MapReduceã€Dynamoã€Spanner |
          | [10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](/ja/10-security/01-authentication-fundamentals) | èªè¨¼ã€OAuthã€ã‚¼ãƒ­ãƒˆãƒ©ã‚¹ãƒˆ |
          | [11. ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£](/ja/11-observability/01-distributed-tracing) | ãƒˆãƒ¬ãƒ¼ã‚·ãƒ³ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒ­ã‚° |
          | [12. ã‚µãƒ¼ãƒ“ã‚¹ãƒ¡ãƒƒã‚·ãƒ¥](/ja/12-service-mesh/01-service-discovery) | ãƒ‡ã‚£ã‚¹ã‚«ãƒãƒªã€ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ã€ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ |
          | [13. ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³](/ja/13-data-pipelines/01-batch-processing) | ãƒãƒƒãƒã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã€Lambda |
          | [14. æ¤œç´¢](/ja/14-search-systems/01-inverted-indexes) | è»¢ç½®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€å…¨æ–‡æ¤œç´¢ |
          | [15. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ](/ja/15-deployment/01-deployment-strategies) | Blue-Greenã€ã‚«ãƒŠãƒªã‚¢ã€ãƒ•ãƒ©ã‚° |
          | [16. LLMã‚·ã‚¹ãƒ†ãƒ ](/ja/16-llm-systems/01-agent-fundamentals) | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€RAGã€ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ |

          <style>
          .babushkai-section {
            text-align: center;
            padding: 2rem 0;
            margin: 2rem 0;
            border-top: 1px solid var(--vp-c-divider);
          }
          .babushkai-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 1rem;
          }
          </style>
          HOMEPAGE_JA

          # Generate Matryoshka doll logo SVG
          cat > public/logo.svg << 'LOGO'
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <!-- Outer doll body -->
            <ellipse cx="50" cy="62" rx="35" ry="38" fill="#E91E63"/>
            <!-- Outer doll head -->
            <circle cx="50" cy="28" r="22" fill="#FFCCBC"/>
            <!-- Hair/headscarf -->
            <path d="M28 28 Q50 5 72 28 Q72 15 50 10 Q28 15 28 28" fill="#E91E63"/>
            <!-- Face circle -->
            <circle cx="50" cy="32" r="15" fill="#FFCCBC"/>
            <!-- Eyes -->
            <circle cx="44" cy="30" r="2" fill="#333"/>
            <circle cx="56" cy="30" r="2" fill="#333"/>
            <!-- Smile -->
            <path d="M44 36 Q50 40 56 36" stroke="#333" stroke-width="1.5" fill="none"/>
            <!-- Blush -->
            <circle cx="40" cy="35" r="3" fill="#FFAB91" opacity="0.6"/>
            <circle cx="60" cy="35" r="3" fill="#FFAB91" opacity="0.6"/>
            <!-- Middle doll (nested) -->
            <ellipse cx="50" cy="70" rx="20" ry="22" fill="#FF4081"/>
            <!-- Inner doll (nested) -->
            <ellipse cx="50" cy="75" rx="12" ry="14" fill="#F8BBD9"/>
            <!-- Decorative pattern -->
            <circle cx="50" cy="68" r="6" fill="#FCE4EC"/>
            <circle cx="50" cy="68" r="3" fill="#E91E63"/>
          </svg>
          LOGO

          # Generate custom theme CSS to match logo colors
          mkdir -p .vitepress/theme
          cat > .vitepress/theme/index.ts << 'THEME'
          import DefaultTheme from 'vitepress/theme'
          import './custom.css'

          export default DefaultTheme
          THEME

          cat > .vitepress/theme/custom.css << 'CUSTOMCSS'
          /* Pink theme to match Matryoshka logo */
          :root {
            --vp-c-brand-1: #E91E63;
            --vp-c-brand-2: #D81B60;
            --vp-c-brand-3: #C2185B;
            --vp-c-brand-soft: rgba(233, 30, 99, 0.14);
            
            /* Hero gradient */
            --vp-home-hero-name-color: transparent;
            --vp-home-hero-name-background: linear-gradient(135deg, #E91E63 0%, #FF4081 100%);
            
            /* Button colors */
            --vp-button-brand-border: #E91E63;
            --vp-button-brand-text: #fff;
            --vp-button-brand-bg: #E91E63;
            --vp-button-brand-hover-border: #D81B60;
            --vp-button-brand-hover-text: #fff;
            --vp-button-brand-hover-bg: #D81B60;
            --vp-button-brand-active-border: #C2185B;
            --vp-button-brand-active-text: #fff;
            --vp-button-brand-active-bg: #C2185B;
          }

          .dark {
            --vp-c-brand-1: #FF4081;
            --vp-c-brand-2: #E91E63;
            --vp-c-brand-3: #F8BBD9;
            --vp-c-brand-soft: rgba(255, 64, 129, 0.16);
            
            --vp-button-brand-border: #FF4081;
            --vp-button-brand-text: #fff;
            --vp-button-brand-bg: #FF4081;
            --vp-button-brand-hover-border: #E91E63;
            --vp-button-brand-hover-text: #fff;
            --vp-button-brand-hover-bg: #E91E63;
          }

          /* Babushkai section styling */
          .babushkai-section {
            text-align: center;
            padding: 2rem 0;
            margin: 2rem 0;
            border-top: 1px solid var(--vp-c-divider);
          }

          .babushkai-section strong {
            color: var(--vp-c-brand-1);
          }
          CUSTOMCSS

          echo "VitePress configuration generated successfully!"

      - name: Install dependencies
        run: npm install

      - name: Build documentation
        run: npm run docs:build

      - name: Setup Pages
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        uses: actions/configure-pages@v4

      - name: Upload artifact
        if: github.event_name == 'push' && github.ref == 'refs/heads/main'
        uses: actions/upload-pages-artifact@v3
        with:
          path: .vitepress/dist

  deploy:
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
